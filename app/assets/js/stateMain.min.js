/*!
 * color-app
 * Color game for the soul made with Phaser
 * https://github.com/verybluebot
 * @author Blue Bot
 * @version 1.0.0
 * Copyright 2018. MIT licensed.
 */
"use strict";var StateMain={preload:function(){game.load.image("green","assets/img/colors/green.png"),game.load.image("blue","assets/img/colors/blue.png"),game.load.image("red","assets/img/colors/red.png"),game.load.image("yellow","assets/img/colors/yellow.png"),game.load.spritesheet("rings","assets/img/rings.png",60,65,5),game.load.spritesheet("balls","assets/img/balls.png",35,35,5),game.load.spritesheet("soundButtons","assets/img/soundButtons.png",32,32,2),game.load.audio("points","assets/sounds/points.mp3"),game.load.audio("gameOver","assets/sounds/gameOver.mp3")},create:function(){console.log("ready for action!");var e=game.add.image(0,0,"green"),s=game.add.image(100,0,"blue"),t=game.add.image(0,100,"red"),a=game.add.image(100,100,"yellow");this.ball=game.add.sprite(0,0,"balls"),this.ballSpeed=200,this.incBallSpeed=10,score=0,this.pointsSound=game.add.audio("points"),this.pointsSound.volume=.5,this.gameOver=game.add.audio("gameOver"),game.physics.startSystem(Phaser.Physics.Arcade),e.inputEnabled=!0,e.name="green",e.events.onInputDown.add(this.changeColor,this),s.inputEnabled=!0,s.name="blue",s.events.onInputDown.add(this.changeColor,this),t.inputEnabled=!0,t.name="red",t.events.onInputDown.add(this.changeColor,this),a.inputEnabled=!0,a.name="yellow",a.events.onInputDown.add(this.changeColor,this),this.colorsGroup=game.add.group(),this.colorsGroup.add(e),this.colorsGroup.add(s),this.colorsGroup.add(t),this.colorsGroup.add(a),this.colorsGroup.x=game.world.centerX-this.colorsGroup.width/2,this.colorsGroup.y=game.height-250,this.ring=game.add.image(game.world.centerX,this.colorsGroup.y-100,"rings"),this.ring.anchor.set(.5,.5),game.physics.arcade.enable(this.ball),this.scoreText=game.add.text(this.world.centerX,150,"0"),this.scoreText.fill="#fff",this.scoreText.fontSize=64,this.scoreText.anchor.set(.5,.5),this.scoreLabel=game.add.text(this.world.centerX,100,"Score"),this.scoreLabel.fill="#fff",this.scoreLabel.fontSize=32,this.scoreLabel.anchor.set(.5,.5),this.soundButton=game.add.image(12,12,"soundButtons"),this.soundButton.inputEnabled=!0,this.soundButton.frame=1,sound=!1,this.setListeners(),this.setRandomBall()},update:function(){var e=Math.abs(this.ring.x-this.ball.x),s=Math.abs(this.ring.y-this.ball.y);e<10&&s<10&&(this.ball.body.velocity.setTo(0,0),this.ball.frame===this.ring.frame?(this.setRandomBall(),score++,this.scoreText.text=score,sound&&this.pointsSound.play()):(game.state.start("StatePlayOver"),sound&&this.gameOver.play()))},setListeners:function(){game.input.onUp.add(this.resetRing,this),this.soundButton.events.onInputDown.add(this.soundToggle,this)},soundToggle:function(){sound=!sound,sound?this.soundButton.frame=0:this.soundButton.frame=1},setRandomBall:function(){var e=game.rnd.integerInRange(1,4),s=game.rnd.integerInRange(0,game.world.width),t=game.rnd.integerInRange(0,100);this.ball.frame=e,this.ball.x=s,this.ball.y=t,this.ballSpeed+=this.incBallSpeed;var a=game.physics.arcade.moveToXY(this.ball,this.ring.x,this.ring.y,this.ballSpeed);this.ball.rotation=a},changeColor:function(e){if(e.name)switch(e.name){case"blue":this.ring.frame=1;break;case"green":this.ring.frame=2;break;case"red":this.ring.frame=3;break;case"yellow":this.ring.frame=4}},resetRing:function(){this.ring.frame=0}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRlTWFpbi5qcyJdLCJuYW1lcyI6WyJTdGF0ZU1haW4iLCJwcmVsb2FkIiwiZ2FtZSIsImxvYWQiLCJpbWFnZSIsInNwcml0ZXNoZWV0IiwiYXVkaW8iLCJjcmVhdGUiLCJjb25zb2xlIiwibG9nIiwiZ3JlZW4iLCJhZGQiLCJibHVlIiwicmVkIiwieWVsbG93IiwidGhpcyIsImJhbGwiLCJzcHJpdGUiLCJiYWxsU3BlZWQiLCJpbmNCYWxsU3BlZWQiLCJzY29yZSIsInBvaW50c1NvdW5kIiwidm9sdW1lIiwiZ2FtZU92ZXIiLCJwaHlzaWNzIiwic3RhcnRTeXN0ZW0iLCJQaGFzZXIiLCJQaHlzaWNzIiwiQXJjYWRlIiwiaW5wdXRFbmFibGVkIiwibmFtZSIsImV2ZW50cyIsIm9uSW5wdXREb3duIiwiY2hhbmdlQ29sb3IiLCJjb2xvcnNHcm91cCIsImdyb3VwIiwieCIsIndvcmxkIiwiY2VudGVyWCIsIndpZHRoIiwieSIsImhlaWdodCIsInJpbmciLCJhbmNob3IiLCJzZXQiLCJhcmNhZGUiLCJlbmFibGUiLCJzY29yZVRleHQiLCJ0ZXh0IiwiZmlsbCIsImZvbnRTaXplIiwic2NvcmVMYWJlbCIsInNvdW5kQnV0dG9uIiwiZnJhbWUiLCJzb3VuZCIsInNldExpc3RlbmVycyIsInNldFJhbmRvbUJhbGwiLCJ1cGRhdGUiLCJkaWZmWCIsIk1hdGgiLCJhYnMiLCJkaWZmWSIsImJvZHkiLCJ2ZWxvY2l0eSIsInNldFRvIiwicGxheSIsInN0YXRlIiwic3RhcnQiLCJpbnB1dCIsIm9uVXAiLCJyZXNldFJpbmciLCJzb3VuZFRvZ2dsZSIsImJhbGxDb2xvciIsInJuZCIsImludGVnZXJJblJhbmdlIiwiYmFsbFgiLCJiYWxsWSIsInJvdGF0aW9uIiwibW92ZVRvWFkiLCJ0YXJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBUUEsWUFSQSxJQUFJQSxZQUNGQyxRQUFTLFdBQ1BDLEtBQUtDLEtBQUtDLE1BQU0sUUFBUywrQkFDekJGLEtBQUtDLEtBQUtD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S0csV0FBYUgsS0FBS0ksWUFFdkIsSUFBTTBELEdBQVczRSxLQUFLc0IsUUFBUXFCLE9BQU9pQyxTQUFTL0QsS0FBS0MsS0FBTUQsS0FBSzJCLEtBQUtOLEVBQUdyQixLQUFLMkIsS0FBS0YsRUFBR3pCLEtBQUtHLFVBRXhGSCxNQUFLQyxLQUFLNkQsU0FBV0EsR0FHdkI1QyxZQUFhLFNBQVM4QyxHQUNwQixHQUFLQSxFQUFPakQsS0FFWixPQUFRaUQsRUFBT2pELE1BQ2IsSUFBSyxPQUNIZixLQUFLMkIsS0FBS1csTUFBUSxDQUNsQixNQUVGLEtBQUssUUFDSHRDLEtBQUsyQixLQUFLVyxNQUFRLENBQ2xCLE1BRUYsS0FBSyxNQUNIdEMsS0FBSzJCLEtBQUtXLE1BQVEsQ0FDbEIsTUFFRixLQUFLLFNBQ0h0QyxLQUFLMkIsS0FBS1csTUFBUSxJQUt4QmlCLFVBQVcsV0FDVHZELEtBQUsyQixLQUFLVyxNQUFRIiwiZmlsZSI6InN0YXRlTWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgU3RhdGVNYWluID0ge1xuICBwcmVsb2FkOiBmdW5jdGlvbigpIHtcbiAgICBnYW1lLmxvYWQuaW1hZ2UoJ2dyZWVuJywgJ2Fzc2V0cy9pbWcvY29sb3JzL2dyZWVuLnBuZycpO1xuICAgIGdhbWUubG9hZC5pbWFnZSgnYmx1ZScsICdhc3NldHMvaW1nL2NvbG9ycy9ibHVlLnBuZycpO1xuICAgIGdhbWUubG9hZC5pbWFnZSgncmVkJywgJ2Fzc2V0cy9pbWcvY29sb3JzL3JlZC5wbmcnKTtcbiAgICBnYW1lLmxvYWQuaW1hZ2UoJ3llbGxvdycsICdhc3NldHMvaW1nL2NvbG9ycy95ZWxsb3cucG5nJyk7XG5cbiAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3JpbmdzJywgJ2Fzc2V0cy9pbWcvcmluZ3MucG5nJywgNjAsIDY1LCA1KTtcbiAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ2JhbGxzJywgJ2Fzc2V0cy9pbWcvYmFsbHMucG5nJywgMzUsIDM1LCA1KTtcbiAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3NvdW5kQnV0dG9ucycsICdhc3NldHMvaW1nL3NvdW5kQnV0dG9ucy5wbmcnLCAzMiwgMzIsIDIpO1xuXG4gICAgZ2FtZS5sb2FkLmF1ZGlvKCdwb2ludHMnLCAnYXNzZXRzL3NvdW5kcy9wb2ludHMubXAzJyk7XG4gICAgZ2FtZS5sb2FkLmF1ZGlvKCdnYW1lT3ZlcicsICdhc3NldHMvc291bmRzL2dhbWVPdmVyLm1wMycpO1xuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3JlYWR5IGZvciBhY3Rpb24hJyk7XG4gICAgY29uc3QgZ3JlZW4gPSBnYW1lLmFkZC5pbWFnZSgwLCAwLCAnZ3JlZW4nKTtcbiAgICBjb25zdCBibHVlID0gZ2FtZS5hZGQuaW1hZ2UoMTAwLCAwLCAnYmx1ZScpO1xuICAgIGNvbnN0IHJlZCA9IGdhbWUuYWRkLmltYWdlKDAsIDEwMCwgJ3JlZCcpO1xuICAgIGNvbnN0IHllbGxvdyA9IGdhbWUuYWRkLmltYWdlKDEwMCwgMTAwLCAneWVsbG93Jyk7XG5cbiAgICB0aGlzLmJhbGwgPSBnYW1lLmFkZC5zcHJpdGUoMCwwLCAnYmFsbHMnKTtcblxuICAgIC8vIHZhcnNcbiAgICB0aGlzLmJhbGxTcGVlZCA9IDIwMDtcbiAgICB0aGlzLmluY0JhbGxTcGVlZCA9IDEwO1xuICAgIHNjb3JlID0gMDtcblxuICAgIHRoaXMucG9pbnRzU291bmQgPSBnYW1lLmFkZC5hdWRpbygncG9pbnRzJyk7XG4gICAgdGhpcy5wb2ludHNTb3VuZC52b2x1bWUgPSAwLjU7XG4gICAgdGhpcy5nYW1lT3ZlciA9IGdhbWUuYWRkLmF1ZGlvKCdnYW1lT3ZlcicpO1xuXG4gICAgZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFyY2FkZSk7XG5cbiAgICBncmVlbi5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgIGdyZWVuLm5hbWUgPSAnZ3JlZW4nO1xuICAgIGdyZWVuLmV2ZW50cy5vbklucHV0RG93bi5hZGQodGhpcy5jaGFuZ2VDb2xvciwgdGhpcyk7XG5cbiAgICBibHVlLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gICAgYmx1ZS5uYW1lID0gJ2JsdWUnO1xuICAgIGJsdWUuZXZlbnRzLm9uSW5wdXREb3duLmFkZCh0aGlzLmNoYW5nZUNvbG9yLCB0aGlzKTtcblxuXG4gICAgcmVkLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gICAgcmVkLm5hbWUgPSAncmVkJztcbiAgICByZWQuZXZlbnRzLm9uSW5wdXREb3duLmFkZCh0aGlzLmNoYW5nZUNvbG9yLCB0aGlzKTtcblxuICAgIHllbGxvdy5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgIHllbGxvdy5uYW1lID0gJ3llbGxvdyc7XG4gICAgeWVsbG93LmV2ZW50cy5vbklucHV0RG93bi5hZGQodGhpcy5jaGFuZ2VDb2xvciwgdGhpcyk7XG5cbiAgICB0aGlzLmNvbG9yc0dyb3VwID0gZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICB0aGlzLmNvbG9yc0dyb3VwLmFkZChncmVlbik7XG4gICAgdGhpcy5jb2xvcnNHcm91cC5hZGQoYmx1ZSk7XG4gICAgdGhpcy5jb2xvcnNHcm91cC5hZGQocmVkKTtcbiAgICB0aGlzLmNvbG9yc0dyb3VwLmFkZCh5ZWxsb3cpO1xuXG4gICAgdGhpcy5jb2xvcnNHcm91cC54ID0gZ2FtZS53b3JsZC5jZW50ZXJYIC0gdGhpcy5jb2xvcnNHcm91cC53aWR0aCAvIDI7XG4gICAgdGhpcy5jb2xvcnNHcm91cC55ID0gZ2FtZS5oZWlnaHQgLTI1MDtcblxuICAgIC8vIHJpbmdzXG4gICAgdGhpcy5yaW5nID0gZ2FtZS5hZGQuaW1hZ2UoZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmNvbG9yc0dyb3VwLnkgLSAxMDAsICdyaW5ncycpO1xuICAgIHRoaXMucmluZy5hbmNob3Iuc2V0KDAuNSwgMC41KTtcblxuICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuYmFsbCk7XG5cbiAgICAvLyB0ZXh0XG4gICAgdGhpcy5zY29yZVRleHQgPSBnYW1lLmFkZC50ZXh0KHRoaXMud29ybGQuY2VudGVyWCwgMTUwLCAnMCcpO1xuICAgIHRoaXMuc2NvcmVUZXh0LmZpbGwgPSAnI2ZmZic7XG4gICAgdGhpcy5zY29yZVRleHQuZm9udFNpemUgPSA2NDtcbiAgICB0aGlzLnNjb3JlVGV4dC5hbmNob3Iuc2V0KDAuNSwgMC41KTtcblxuICAgIHRoaXMuc2NvcmVMYWJlbCA9IGdhbWUuYWRkLnRleHQodGhpcy53b3JsZC5jZW50ZXJYLCAxMDAsICdTY29yZScpO1xuICAgIHRoaXMuc2NvcmVMYWJlbC5maWxsID0gJyNmZmYnO1xuICAgIHRoaXMuc2NvcmVMYWJlbC5mb250U2l6ZSA9IDMyO1xuICAgIHRoaXMuc2NvcmVMYWJlbC5hbmNob3Iuc2V0KDAuNSwgMC41KTtcblxuICAgIHRoaXMuc291bmRCdXR0b24gPSBnYW1lLmFkZC5pbWFnZSgxMiwgMTIsICdzb3VuZEJ1dHRvbnMnKTtcbiAgICB0aGlzLnNvdW5kQnV0dG9uLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zb3VuZEJ1dHRvbi5mcmFtZSA9IDE7XG4gICAgc291bmQgPSBmYWxzZTtcblxuICAgIC8vIHNldCB1cCBsaXN0ZW5lcnNcbiAgICB0aGlzLnNldExpc3RlbmVycygpO1xuXG4gICAgLy8gc2V0IHJhbmRvbSBwbGFjZSBmb3IgdGhlIGJhbGxcbiAgICB0aGlzLnNldFJhbmRvbUJhbGwoKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuXG4gICAgY29uc3QgZGlmZlggPSBNYXRoLmFicyh0aGlzLnJpbmcueCAtIHRoaXMuYmFsbC54KTtcbiAgICBjb25zdCBkaWZmWSA9IE1hdGguYWJzKHRoaXMucmluZy55IC0gdGhpcy5iYWxsLnkpO1xuXG4gICAgaWYgKGRpZmZYIDwgMTAgJiYgZGlmZlkgPCAxMCkge1xuICAgICAgdGhpcy5iYWxsLmJvZHkudmVsb2NpdHkuc2V0VG8oMCwgMCk7XG5cbiAgICAgIGlmICh0aGlzLmJhbGwuZnJhbWUgPT09IHRoaXMucmluZy5mcmFtZSkge1xuICAgICAgICB0aGlzLnNldFJhbmRvbUJhbGwoKTtcbiAgICAgICAgc2NvcmUrKztcbiAgICAgICAgdGhpcy5zY29yZVRleHQudGV4dCA9IHNjb3JlO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHRoaXMucG9pbnRzU291bmQucGxheSgpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ1N0YXRlUGxheU92ZXInKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICB0aGlzLmdhbWVPdmVyLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBzZXRMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xuICAgIGdhbWUuaW5wdXQub25VcC5hZGQodGhpcy5yZXNldFJpbmcsIHRoaXMpO1xuICAgIHRoaXMuc291bmRCdXR0b24uZXZlbnRzLm9uSW5wdXREb3duLmFkZCh0aGlzLnNvdW5kVG9nZ2xlLCB0aGlzKTtcbiAgfSxcblxuICBzb3VuZFRvZ2dsZTogZnVuY3Rpb24oKSB7XG4gICAgc291bmQgPSAhc291bmQ7XG4gICAgaWYgKHNvdW5kKSB7XG4gICAgICB0aGlzLnNvdW5kQnV0dG9uLmZyYW1lID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zb3VuZEJ1dHRvbi5mcmFtZSA9IDE7XG4gICAgfVxuICB9LFxuXG4gIHNldFJhbmRvbUJhbGw6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGJhbGxDb2xvciA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDEsIDQpO1xuICAgIGNvbnN0IGJhbGxYID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoMCwgZ2FtZS53b3JsZC53aWR0aCk7XG4gICAgY29uc3QgYmFsbFkgPSBnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZSgwLCAxMDApO1xuXG4gICAgdGhpcy5iYWxsLmZyYW1lID0gYmFsbENvbG9yO1xuICAgIHRoaXMuYmFsbC54ID0gYmFsbFg7XG4gICAgdGhpcy5iYWxsLnkgPSBiYWxsWTtcblxuICAgIC8vIHRoaXMuYmFsbC5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDEwMCk7XG5cbiAgICAvLyBpbmNyZWFzIGJhbGwgc3BlZWRcbiAgICB0aGlzLmJhbGxTcGVlZCArPSB0aGlzLmluY0JhbGxTcGVlZDtcbiAgICAvLyByZXR1cm5zIHJvdGF0aW9uIHRvIHRoZSB0YXJnZXRcbiAgICBjb25zdCByb3RhdGlvbiA9IGdhbWUucGh5c2ljcy5hcmNhZGUubW92ZVRvWFkodGhpcy5iYWxsLCB0aGlzLnJpbmcueCwgdGhpcy5yaW5nLnksIHRoaXMuYmFsbFNwZWVkKTtcblxuICAgIHRoaXMuYmFsbC5yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICB9LFxuXG4gIGNoYW5nZUNvbG9yOiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICBpZiAoIXRhcmdldC5uYW1lKSByZXR1cm47XG5cbiAgICBzd2l0Y2ggKHRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdibHVlJzpcbiAgICAgICAgdGhpcy5yaW5nLmZyYW1lID0gMTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2dyZWVuJzpcbiAgICAgICAgdGhpcy5yaW5nLmZyYW1lID0gMjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3JlZCc6XG4gICAgICAgIHRoaXMucmluZy5mcmFtZSA9IDM7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd5ZWxsb3cnOlxuICAgICAgICB0aGlzLnJpbmcuZnJhbWUgPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LFxuXG4gIHJlc2V0UmluZzogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yaW5nLmZyYW1lID0gMDtcbiAgfVxufTtcbiJdfQ==
